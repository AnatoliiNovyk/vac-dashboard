<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# Тільки для вкладки HR, для інших непотрібно

Прийнято. Аналітичні графіки додаємо лише у вкладці HR; у Manager і My View графіків не буде. Ось стислий промпт для агента саме під це обмеження (готовий до вставки):

Промпт: Графіки тільки для вкладки HR

Мета

- Додати у вкладці HR набір графіків і KPI для аналітики відпусток. У вкладках Manager та My View графіки не рендерити (ні за яких умов).

Правила

- 3 статуси: “У відпустці”, “Заплановано”, “На роботі”.
- Запити/затвердження — повністю вимкнено (ніяких pending/approve/reject).
- HR має право редагувати дані будь-якого співробітника (не впливає на графіки, але не блокувати панель редагування).
- “Залишок” використовується в KPI/розподілах.
- Перед кожним кроком “Check \& Plan”; після — новий changelog у changelogs/.
- Нічого не видаляти; усі “вимкнення” — через guards.

Джерела даних і фільтри (HR only)

- Фільтри: період (month/quarter/year/custom), департамент, тип відпустки, менеджер (опційно).
- Область HR: усі співробітники згідно політики компанії.
- Обчислення: статуси за today, “Залишок” = total_allocated_days − days_taken_to_date (майбутні не віднімаємо).

Графіки (тільки всередині HR layout)

1) KPI cards:
    - Total employees, Currently on leave (%), Planned (30/60/90), Avg days left, Burn rate.
2) Line/Area “Використані дні за період”.
3) Stacked Bar “Статуси за часом” (3 стека).
4) Distribution (Box/Violin/Hist) “Розподіл ‘Залишок’”.
5) Heatmap календар “Щільність відпусток”.
6) Bar “TOP‑10 за використаними днями”.

Технічні нотатки

- Обрати одну бібліотеку (Chart.js/ECharts/Recharts) і зафіксувати в changelog.
- Візуалізацію загортати у HRDashboardAnalytics.tsx, що рендериться тільки коли activeTab === 'HR'.
- Усі селектори/агрегації — memoized; нульові/порожні — коректно показувати.
- Синхронізація з таблицями HR: клік на графік → застосувати фільтри до таблиці під графіками.
- Manager/My View: не імпортувати/не монтувати жодних графіків, навіть умовно.

Покроковість (кожен крок = окремий changelog)

- Крок 0: Audit \& Plan (HR layout, доступні дані, макет).
- Крок 1: Інфраструктура графіків (lib, шари, тема) — тільки в HR.
- Крок 2: KPI cards (формули, тести).
- Крок 3: Line/Area + Stacked Bar (фільтри, синхронізація).
- Крок 4: Distribution “Залишок”.
- Крок 5: Heatmap календар.
- Крок 6: TOP‑10 bar.
- Крок 7: Регресія/перформанс/документація.

Перевірки

- Графіки видно лише у вкладці HR; у Manager/My View — відсутні.
- Тільки 3 статуси, без заявок.
- “Залишок” використано в KPI/розподілах.
- Новий changelog створено; консолі без помилок.

Якщо потрібно — піджену під ваш стек готовими компонентами (Chart.js або ECharts) та DIFF‑патчем HRDashboardAnalytics.tsx з підключенням у HR layout.


<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# після додавання графіків зникли вкладки та таблиці з списками, графіки не з'явились в інтерфейсі. Напиши промпт, щоб він починив все негайно

Ось терміновий промпт для агента, щоб негайно відновити вкладки й таблиці та коректно вмонтувати графіки лише у вкладці HR без побічних ефектів. Скопіюйте й вставте в агент.

Промпт: Негайний фікс вкладок/таблиць і безпечне підключення графіків (HR only)

Умова інциденту

- Після додавання графіків зникли вкладки і таблиці списків; графіки не з’явились.
- Очікувано: вкладки (HR/Manager/My View за ролями) мають працювати, таблиці відображатись як раніше, графіки рендеряться тільки у вкладці HR, нічого не видаляти.

Гарантії/обмеження

- Жодних змін схеми БД/контрактів API.
- Нічого не видаляти; тільки мінімальні правки і відновлення.
- Жодних елементів “заявок/затверджень”.
- 3 статуси: “У відпустці”, “Заплановано”, “На роботі”.
- “Залишок” лишається в таблицях.
- Після кожного кроку — новий changelog у changelogs/.

Крок 0 — Check \& Plan (без змін коду)

- Перевір, чи не було:
    - Перенесення контейнера вкладок у новий layout графіків (unmount старих компонентів).
    - Конфлікту маршрутизації/стану (activeTab/role).
    - Помилок імпорту/динамічного імпорту графічної бібліотеки (ECharts/Chart.js) — runtime error, який зупинив рендер дочірніх.
    - Некоректного Suspense/Boundary, який сховав children.
- Зафіксуй висновки в changelog (stack trace, компоненти, де пропав рендер).

Крок 1 — Відновити рендер вкладок і таблиць

- Поверни попередню структуру контейнера вкладок (наприклад, Tabs → TabPanels → HRPanel/ManagerPanel/MyViewPanel).
- Забезпеч: графіки монтуються тільки всередині HRPanel у виділеному контейнері <HRAnalytics/> після верхніх KPI (якщо є), і не замінюють існуючі таблиці.
- Негайно вимкни умовний рендер графіків поза HR:
    - if (activeTab !== 'HR') return null для HRAnalytics.
- Перевір, що таблиці (списки періодів, списки співробітників) монтуються та отримують пропси як раніше.

Крок 2 — Ізолювати графічний контейнер

- Винеси графіки у окремий компонент HRAnalytics.tsx:
    - Забезпечити ErrorBoundary навколо нього, аби падіння графіків не зносило вкладки/таблиці.
    - Ліниве завантаження (lazy(() => import('./HRAnalytics'))) та <Suspense fallback={null}> всередині HRPanel, не обгортай усю вкладку.
    - Не підміняй кореневий layout; графіки рендеряться нижче фільтрів/календаря/таблиць або у відведеній правій колонці (залежно від макета).

Крок 3 — Перевірка library imports

- Якщо використано Chart.js/ECharts:
    - Імпорти робити лише в HRAnalytics.tsx.
    - Для SSR/strict mode — провірити window/document доступи (guard).
    - Вилучити глобальні side effects, що могли зламати конфіг роутера/сторінок.

Крок 4 — Візуальна перевірка та регресія

- Переконайся: вкладки повернулися, таблиці є, графіки з’являються лише в HR.
- Консоль без помилок; мережеві запити не змінилися.
- Зроби скріншоти до/після та додай у changelog.

Чіткі вказівки по файлах (орієнтовно)

- src/components/layout/Tabs.tsx (або де вкладки): відновити рендер TabList/TabPanels; переконатися, що activeTab береться зі стану/URL як раніше.
- src/pages/HRPanel.tsx: додати секцію для <HRAnalytics/> під існуючими фільтрами/календарем/таблицями або в окремій колонці; обгорнути в ErrorBoundary; lazy‑import.
- src/pages/ManagerPanel.tsx, src/pages/MyViewPanel.tsx: переконатися, що графіки не імпортуються/не монтуються.
- src/components/HRAnalytics.tsx: містить лише графіки; імпорти бібліотеки та дані через селектори; у разі винятку — показує м’який fallback.
- Не змінювати існуючі таблиці, тільки повернути їх рендер.

Швидкі перевірки (acceptance)

- HR: видно вкладку, фільтри, календар/список періодів/таблиці, і блок графіків.
- Manager/My View: вкладки й таблиці на місці, графіків немає.
- Жодних згадок “заявок”.
- “Залишок” залишився в таблицях.
- Changelog створений.

Відповідь агента після виконання

- Надати короткий “Check \& Plan”, DIFF по файлах, скріншоти після, і changelog‑файл з переліком причин інциденту та виправлень.
- Якщо знайдено додаткові кореневі причини (наприклад, неправильний Suspense або помилковий ключ контейнера) — виправити в цьому ж кроці, описати в changelog.

Якщо потрібен конкретний DIFF під ваші файли (імена компонентів, як на скріні) — надайте шляхи/назви, і буде надано точковий патч.
<span style="display:none">[^1]</span>

<div align="center">⁂</div>

[^1]: image.jpg


# Changelog: План рефакторингу до системи прямого управління

Цей документ описує план переходу від системи заявок до системи прямого управління записами про періоди відпусток, згідно з ТЗ `new_system_prompt.md`.

## План робіт

**Крок 1: Увімкнення функціональних прапорів та очищення UI**
- В `app.js` встановити значення прапорів:
  - `FEATURES.REQUESTS_ENABLED = false`
  - `FEATURES.LEGACY_BADGES = false`
  - `FEATURES.MANAGER_HIERARCHY = true`
- Видалити з UI (кнопок, модальних вікон) та логіки будь-які елементи, що стосуються створення "заявок" співробітниками або їх затвердження.

**Крок 2: Централізація логіки статусів**
- Перевірити функцію `getEmployeeStatus` на повну відповідність трьом статусам: `on-leave`, `planned`, `at-work`.
- Забезпечити, що ця функція є єдиним джерелом правди для статусу співробітника у всіх компонентах: таблицях, календарі, аналітиці.

**Крок 3: Налаштування рендеру вкладок за ролями**
- Модифікувати функцію `getTabsForRole` для коректного відображення вкладок залежно від ролі та наявності прапора `is_hr_manager` у поточного користувача.

**Крок 4: Активація ієрархії менеджерів**
- Інтегрувати функцію `getAllSubordinates` для фільтрації даних на вкладці "Manager View", щоб менеджер бачив дані лише своїх прямих та непрямих підлеглих.

**Крок 5: Розширення прав HR**
- Переконатись, що HR-менеджер може редагувати та видаляти періоди відпусток для будь-якого співробітника.
- Додати валідацію на формі редагування періоду.
- *Бекенд*: Додати політики доступу, які дозволяють HR-у змінювати будь-які дані (зараз це вже частково реалізовано).

**Крок 6: Синхронізація UI з новими статусами**
- Адаптувати календар та дашборд аналітики для коректної візуалізації даних на основі трьох статусів. Видалити будь-які згадки про застарілі статуси.

**Крок 7: Фінальна регресія**
- Провести повне тестування функціоналу для всіх ролей.
- Перевірити продуктивність та доступність (accessibility).
- Створити фінальний changelog про завершення рефакторингу.

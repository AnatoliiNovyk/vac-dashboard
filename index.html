<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacation Dashboard - Система управління періодами відпусток</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="header-title">
                    <i class="fas fa-calendar-alt"></i>
                    Vacation Dashboard
                </h1>
                <div class="role-selector">
                    <label for="userRole" class="form-label">Оберіть роль:</label>
                    <select id="userRole" class="form-control">
                        <option value="">-- Оберіть роль --</option>
                        <option value="hr">HR</option>
                        <option value="manager">Менеджер</option>
                        <option value="employee">Співробітник</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="welcome-screen">
                <div class="welcome-card">
                    <i class="fas fa-users welcome-icon"></i>
                    <h2>Ласкаво просимо до системи управління періодами відпусток</h2>
                    <p>Оберіть вашу роль для доступу до відповідного дашборду</p>
                </div>
            </div>

            <!-- Dashboard Container -->
            <div id="dashboard-container" class="dashboard-container hidden">
                <!-- User Info -->
                <div class="user-info-bar">
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span id="current-user-name">Користувач</span>
                        <span id="current-user-role" class="user-role-badge">Роль</span>
                    </div>
                    <div class="user-stats">
                        <div class="stat-item">
                            <span class="stat-label">Загалом днів:</span>
                            <span id="total-days" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Використано:</span>
                            <span id="used-days" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Залишилось:</span>
                            <span id="remaining-days" class="stat-value">0</span>
                        </div>
                    </div>
                </div>

                <!-- Navigation Tabs -->
                <nav class="tabs-nav" id="tabs-nav">
                    <!-- Tabs will be populated dynamically -->
                </nav>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Filters and Actions -->
                    <div class="filters-actions-section" id="filters-actions-section">
                        <div class="filters-grid">
                            <div id="department-filter-group" class="filter-group">
                                <label class="form-label">Департамент:</label>
                                <select id="department-filter" class="form-control">
                                    <option value="">Всі департаменти</option>
                                </select>
                            </div>
                            <div id="status-filter-group" class="filter-group" style="display: none;">
                                <label class="form-label">Статус співробітника:</label>
                                <select id="status-filter" class="form-control">
                                    <option value="">Всі статуси</option>
                                    <option value="on-leave">У відпустці</option>
                                    <option value="planned">Заплановано</option>
                                    <option value="at-work">На роботі</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <button id="clear-filters" class="btn btn--secondary">
                                    <i class="fas fa-times"></i>
                                    Очистити фільтри
                                </button>
                            </div>
                        </div>
                        <div id="bas-sync-section" class="bas-sync-section hidden">
                            <button id="import-bas-btn" class="btn btn--outline"><i class="fas fa-file-import"></i> Імпорт з BAS</button>
                            <button id="export-bas-btn" class="btn btn--outline"><i class="fas fa-file-export"></i> Експорт у BAS</button>
                            <button id="mapping-info-btn" class="btn btn--icon-only" aria-label="Схема полів"><i class="fas fa-info-circle"></i></button>
                        </div>
                    </div>

                    <!-- Content Area -->
                    <div class="content-area" id="content-area">
                        <!-- Calendar View -->
                        <div class="calendar-section">
                            <div class="calendar-header">
                                <h3>Календар періодів відпусток</h3>
                                <div class="calendar-controls">
                                    <button id="prev-month" class="btn btn--outline btn--sm"><i class="fas fa-chevron-left"></i></button>
                                    <span id="current-month-year">Жовтень 2025</span>
                                    <button id="next-month" class="btn btn--outline btn--sm"><i class="fas fa-chevron-right"></i></button>
                                </div>
                            </div>
                            <div class="calendar-grid" id="calendar-grid"></div>
                        </div>

                        <!-- Table View -->
                        <div class="table-section">
                            <div class="table-header">
                                <h3>Список періодів відпусток</h3>
                                <button id="add-vacation-btn" class="btn btn--primary hidden"><i class="fas fa-plus"></i> Запланувати період відпустки</button>
                            </div>
                            <div class="table-container">
                                <table id="vacations-table" class="vacations-table">
                                    <thead></thead>
                                    <tbody id="vacations-table-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analytics Section -->
                    <section id="analytics-section" aria-label="HR Analytics" class="analytics-section hidden">
                        <div class="analytics-grid">
                            <div class="chart-card" id="kpi-card-slot">
                                <!-- KPI content will be injected here -->
                            </div>
                            <div class="chart-card" id="status-chart-slot">
                                <h3>Статус співробітників</h3>
                                <div class="chart-container">
                                    <canvas id="employee-status-chart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card" id="department-chart-slot">
                                <h3>Використання відпусток за департаментами</h3>
                                <div class="chart-container">
                                    <canvas id="department-leave-chart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card" id="most-days-slot">
                                <h4>Топ-5 співробітників із найбільшою кількістю днів відпустки</h4>
                                <div class="ranking-table-container">
                                    <table id="most-days-table" class="ranking-table"></table>
                                </div>
                            </div>
                            <div class="chart-card" id="least-days-slot">
                                 <h4>Топ-5 співробітників із найменшою кількістю днів відпустки</h4>
                                <div class="ranking-table-container">
                                    <table id="least-days-table" class="ranking-table"></table>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for new/edit vacation -->
    <div id="vacation-form-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="vacation-form-title">Запланувати період відпустки</h3>
                <button class="modal-close" id="vacation-form-modal-close"><i class="fas fa-times"></i></button>
            </div>
            <form id="vacation-form">
                <input type="hidden" id="vacation-id-input" />
                <div class="modal-body">
                    <div class="form-group" id="employee-select-group">
                        <label for="employee-select" class="form-label">Співробітник</label>
                        <select id="employee-select" class="form-control" required></select>
                    </div>
                    <div class="form-group">
                        <label for="start-date-input" class="form-label">Дата початку</label>
                        <input type="date" id="start-date-input" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="end-date-input" class="form-label">Дата закінчення</label>
                        <input type="date" id="end-date-input" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="vacation-days-input" class="form-label">Кількість днів</label>
                        <input type="text" id="vacation-days-input" class="form-control" readonly>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancel-vacation-form-btn" class="btn btn--secondary">Скасувати</button>
                    <button type="submit" class="btn btn--primary">Зберегти</button>
                </div>
            </form>
        </div>
    </div>

    <!-- BAS Sync Modals -->
    <div id="import-bas-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Імпорт співробітників з BAS</h3>
                <button class="modal-close" id="import-bas-modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Спосіб імпорту:</label>
                    <div class="tabs-nav">
                         <button class="tab-button active" data-import-type="file">Файл (CSV/JSON)</button>
                         <button class="tab-button" data-import-type="http">HTTP Endpoint</button>
                    </div>
                </div>
                <div id="import-file-section">
                    <div class="form-group">
                        <label for="import-file-input" class="form-label">Оберіть або перетягніть файл:</label>
                        <div class="drag-drop-area" id="drag-drop-area">
                             <i class="fas fa-cloud-upload-alt"></i>
                             <p>Перетягніть файл сюди або натисніть, щоб обрати</p>
                             <input type="file" id="import-file-input" class="hidden" accept=".csv,.json,.xml">
                        </div>
                    </div>
                    <div class="import-preview">
                        <h4>Попередній перегляд:</h4>
                        <div id="import-preview-content" class="table-container">
                           <p>Тут буде попередній перегляд даних...</p>
                        </div>
                    </div>
                </div>
                <div id="import-http-section" class="hidden">
                     <p>Функціонал імпорту через HTTP Endpoint знаходиться у розробці.</p>
                </div>
            </div>
             <div class="modal-footer">
                <div id="import-summary" class="import-summary"></div>
                <button type="button" id="cancel-import-btn" class="btn btn--secondary">Скасувати</button>
                <button type="button" id="run-import-btn" class="btn btn--primary" disabled>Запустити імпорт</button>
            </div>
        </div>
    </div>

    <div id="export-bas-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Експорт співробітників у BAS</h3>
                <button class="modal-close" id="export-bas-modal-close"><i class="fas fa-times"></i></button>
            </div>
            <form id="export-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="export-format" class="form-label">Формат файлу:</label>
                        <select id="export-format" class="form-control">
                            <option value="csv">CSV</option>
                            <option value="json">JSON</option>
                            <option value="xml">XML (у розробці)</option>
                        </select>
                    </div>
                    <fieldset>
                        <legend>Фільтри</legend>
                        <div class="form-group">
                            <label for="export-department-filter" class="form-label">Департамент:</label>
                            <select id="export-department-filter" class="form-control">
                                <option value="">Всі департаменти</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="export-status-filter" class="form-label">Статус активності:</label>
                             <select id="export-status-filter" class="form-control">
                                <option value="">Всі статуси</option>
                                <option value="active">Активні</option>
                                <option value="inactive">Неактивні</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="export-only-changes-checkbox">
                            <label for="export-only-changes-checkbox">Експортувати тільки зміни з дати:</label>
                            <input type="date" id="export-changes-date-input" class="form-control" disabled>
                        </div>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancel-export-btn" class="btn btn--secondary">Скасувати</button>
                    <button type="submit" class="btn btn--primary">Експортувати</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="fields-mapping-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Схема полів (мапінг)</h3>
                <button class="modal-close" id="fields-mapping-modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>Тут буде детальна інформація про мапінг полів між цією системою та BAS.</p>
            </div>
        </div>
    </div>


    <script src="app.js"></script>
</body>
</html>
